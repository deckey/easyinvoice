<html t:type="layout" 
      title="EasyInvoice : Add invoice" 
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_4.xsd"
      xmlns:p="tapestry:parameter">
   
    <body>
        <t:header/>
        <t:mainmenu/>
        <div class="row border_btm">
            <div class="col-xs-6">
                <h4> New invoice</h4>
            </div>
            <div class="col-xs-6">
                <h4 class='text-right'> Preview icon</h4>
            </div>
        </div>
        <!--INVOICE..................-->
        <t:form t:id="addInvoiceForm" t:object="invoice">
            <div class="row well">
                <div class="control-group col-xs-3">
                    <label for="invoiceDescription">* Invoice description</label>
                    <t:textfield id="invoiceDescription" t:value="invoiceDescription"/>
                </div>
                <div class="control-group col-xs-2">
                    <label for="invoiceNumber">* Invoice number</label>
                    <t:textfield id="invoiceNumber" t:value="invoiceNumber"/>
                </div>
                <div class="control-group col-xs-2 col-xs-offset-1">
                    <label for="invoiceIssueDate">* Issue date</label>
                    <t:datefield id="invoiceIssueDate" t:value="invoiceIssueDate"/>
                </div>
                <div class="control-group col-xs-2">
                    <label for="invoiceDueDate">* Due date</label>
                    <t:datefield id="invoiceDueDate" t:value="invoiceDueDate"/>
                </div> 
                <div class="control-group col-xs-2">
                    <label for="invoiceCurrency">Currency:</label>
                    <t:select id="invoiceCurrency" t:model="currencies" t:value="invoiceCurrency"/>
                </div> 
                <div class="row spacer"/>
                <div class="control-group col-xs-3">
                    <label for="invoiceClient">Select client:</label>
                    <t:select id="invoiceClient" t:model="clients"  t:value="invoiceClient"/>
                </div> 
               
                <div class="control-group col-xs-1">
                    <label for="clearBtn" class="invisible">spacer</label>
                    <t:eventlink t:event="clearInvoiceForm" id="clearBtn" class="btn btn-default">clear</t:eventlink>
                </div> 
                <div class="control-group col-xs-1">
                    <label for="setBtn" class="invisible">spacer</label>
                    <t:submit id="setBtn" value="set"/>
                </div>
            </div>
            <div class="row">
                
            </div>
           
        </t:form>
        <!--.......................INVOICE-->
        
        <div class="row border_btm">
            <div class="col-xs-6">
                <h4> Add services</h4>
            </div>
        </div>
        <!--SERVICES..................--> 
        <div class="row well">
            <!--SERVICE INPUT>..................-->
            <t:form t:id="addServiceForm">
                <div class="col-xs-12 col-sm-6">
                    <div class="control-group col-xs-6">
                        <label for="serviceDescription">Service description</label>
                        <t:textfield t:id="serviceDescription" value="serviceDescription"/>
                    </div>
                    <div class="control-group col-xs-2">
                        <label for="serviceAmount">Amount</label>
                        <t:textfield t:id="serviceAmount" value="serviceAmount"/>                
                    </div>
                    <div class="control-group col-xs-1">
                        <label class="invisible">spacer</label>
                        <t:submit value="+"/>
                    </div>
                    <div class="control-group col-xs-1 ">
                        <label class="invisible">spacer</label>
                        <t:eventlink t:event="clearServices" class="btn btn-default">clear</t:eventlink>
                    </div>
                </div>
                <!--SERVICES TABLE ..........-->
                <div class="col-xs-12 col-sm-6">
                    <t:grid source="invoiceServices" class="table table-service" id="servicesGrid" model="servicesGrid">
                        <p:empty> No service(s) added </p:empty>
                    </t:grid>
                    <table class=" table table-service">
                        <tr>
                            <td></td>
                            <td class="text-right">
                                <i>Total amount:</i> 
                            </td>
                            <td>
                                <b>${getFormatAmount(invoice.invoiceAmount)} ${invoice.invoiceCurrency.getValue()}</b>
                            </td>
                        </tr>
                    </table>
                </div>
                <!--...............SERVICES TABLE-->
                <div class="col-xs-12 col-sm-12">
                    <t:errors/>
                </div>
            </t:form>
        </div>
        <!--...................SERVICE INPUT-->
        <div class="row spacer"/>
        <!--..............SERVICES-->
        
        <div class="row border_btm">
            <div class="col-xs-6">
                <h4>Invoice details:</h4>
            </div>
        </div>
        <div class="row well ">
            <!--INVOICE PREVIEW-->
            <div class="col-xs-12 col-sm-6">
                <h5>Invoice #: <b>${invoice.invoiceNumber}</b></h5>
                <h5>Company: <b>${invoice.getClient()}</b></h5>
                <h5>Description: <b>${invoice.invoiceDescription}</b></h5>
                <h5>Issue date: <b>${getFormatDate(invoice.invoiceIssueDate)}</b></h5>
                <h5>Due date: <b>${getFormatDate(invoice.invoiceDueDate)}</b></h5>
                <h5>Invoice amount: <b>${getFormatAmount(invoice.invoiceAmount)} ${invoice.invoiceCurrency.getValue()}</b></h5>
            </div>
          
        </div>
    </body>
</html>

